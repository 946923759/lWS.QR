apply plugin: 'com.android.application'

android {
    compileSdkVersion 24
    buildToolsVersion '25.0.0'

    lintOptions {
        disable 'SetJavaScriptEnabled', 'GoogleAppIndexingWarning'
    }

    defaultConfig {
        applicationId "net.basov.lws.qr"
        minSdkVersion 16
        targetSdkVersion 21
        versionCode 200
        versionName "00.02.00"
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
}

task makeJS(type: Exec) {
    inputs.file file("qrcodejs/qrcode.js")
    //outputs.dir("src/main/assets")
    outputs.file file("src/main/assets/qrcode.min.js")
    commandLine "uglifyjs", "--comments", "'/\\*[^\\0]+?@author[^\\0]+?\\*/'", "-o", "src/main/assets/qrcode.min.js", "qrcodejs/qrcode.js"
    println "Create minifyed qrcode.js"
}

build.dependsOn makeJS

dependencies {
    compile fileTree(dir: 'libs', include: ['*.jar'])
}
